<ion-content [scrollEvents]="true" [fullscreen]="true" (ionScroll)="handleScroll($any($event))">
  <div>
    <div class="subHeader ion-text-center">
      <h1 class="headline ion-no-margin">Apprendre <ion-icon name="albums"></ion-icon></h1>
      <p class="subHeadline">{{categorySelected?.label}} ({{categorySelected?.code}}) - leçon {{userReview.order}} / {{reviews.length}}</p>
    </div>
    <!-- <div class="subHeader ion-padding">
      <h1 class="headline ion-no-margin ion-text-center">{{categorySelected?.label}} ({{categorySelected?.code}})<small> - Leçon</small></h1>
    </div> -->
    <div id="categories-menu" class="ion-scroll-review" [class.is-pinned]="isPinned">
      <div class="ion-margin-vertical-min">
        <ion-button *ngFor="let c of categories" size="small" class="ion-button ion-button-{{c.code | lowercase}}" [ngClass]="{'ion-button-active': categorySelected?.code === c.code}" (click)="setCategory(c.code)">{{c.label}}
          ({{c.code}})</ion-button>
      </div>
    </div>
    <div class="scrollGradient">
      <div *ngFor="let r of reviews; let index = index" class="ion-unlock-lesson" [ngClass]="{ 'ion-last-card' : index === reviews.length - 1 }">
        <ion-icon *ngIf="categoryLevel < codeCategorySelectedLevel || (userReview.lesson <= r.lesson && userReview.order < r.order)" class="ion-icon-locked" size="medium" name="lock-closed" [ngClass]="{ 'ion-first-icon' : index }"></ion-icon>
        <ion-icon *ngIf="!(categoryLevel < codeCategorySelectedLevel || (userReview.lesson <= r.lesson && userReview.order < r.order))" class="ion-icon-checked" size="medium" name="checkmark-circle" [ngClass]="{ 'ion-first-icon' : index }"></ion-icon>
        <ion-card [ngClass]="{ 'ion-card-locked' : categoryLevel < codeCategorySelectedLevel || (userReview.lesson <= r.lesson && userReview.order < r.order) }">
          <ion-card-header>
            <ion-card-title>{{r.text}}</ion-card-title>
            <ion-card-subtitle>{{r.translate}}</ion-card-subtitle>
          </ion-card-header>
          <ion-card-content>
            <div class="ion-custom-text" *ngFor="let content of r.contents">{{content}}</div>
          </ion-card-content>
          <ion-button *ngIf="!(categoryLevel < codeCategorySelectedLevel || (userReview.lesson <= r.lesson && userReview.order < r.order))" size="small" class="ion-button ion-button-words ion-padding-min-start ion-float-left ion-button-position" fill="clear" (click)="openModal(r)">
            Voir les mots
          </ion-button>
          <ion-button *ngIf="!(categoryLevel < codeCategorySelectedLevel || (userReview.lesson <= r.lesson && userReview.order < r.order))" size="small" class="ion-button ion-button-active ion-padding-min-end ion-float-right ion-button-position" fill="clear" (click)="accessReview(r)">
            {{ categoryLevel === codeCategorySelectedLevel && userReview.lesson <= r.lesson && userReview.order === r.order ? 'Démarrer le cours' : 'Revoir le cours'}}
          </ion-button>
        </ion-card>
      </div>
      <ion-modal [isOpen]="isWordsDisplay" [initialBreakpoint]="0.75" [breakpoints]="[0, 0.25, 0.5, 0.75, 1]">
        <ng-template>
          <ion-header>
            <ion-toolbar>
              <ion-title>Mots à apprendre dans ce cours</ion-title>
              <ion-buttons slot="end">
                <ion-button (click)="closeModal()">
                  <ion-icon slot="icon-only" name="close"></ion-icon>
                </ion-button>
              </ion-buttons>
            </ion-toolbar>
          </ion-header>
          <ion-content>
            <ion-list>
              <ion-item *ngFor="let word of words" lines="full">
                <ion-label class="ion-text-wrap">
                  <span>{{word.translate}} : </span><span class="ion-text">{{word.text}}</span>
                </ion-label>
              </ion-item>
            </ion-list>
          </ion-content>
        </ng-template>
      </ion-modal>
    </div>
    <!-- <div class="ion-unlock-lesson">
      <ion-icon class="ion-icon-checked" size="medium" name="checkmark-circle"></ion-icon>
      <ion-card>
        <ion-card-header>
          <ion-card-title>Card Title</ion-card-title>
          <ion-card-subtitle>Card Subtitle</ion-card-subtitle>
        </ion-card-header>
        <ion-card-content>
          Here's a small text description for the card content. Nothing more, nothing less.
        </ion-card-content>
        <ion-button fill="clear">Action 1</ion-button>
      </ion-card>
    </div> -->
  </div>
</ion-content>